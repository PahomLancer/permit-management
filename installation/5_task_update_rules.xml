<?xml version="1.0" encoding="UTF-8"?><COMPONENTS description="Permit Management Vizion Package">
<RULES>
<RULES_ITEM>
  <IS_ASYNC>0</IS_ASYNC>
  <IS_ENABLED>1</IS_ENABLED>
  <RULE>PRM_PERMIT_AGE wtu</RULE>
  <RULE_CLASS_ID>1</RULE_CLASS_ID>
  <RULE_ID>100007969</RULE_ID>
  <RULE_TYPE>
   <RULE_TYPE_ID>1</RULE_TYPE_ID>
   <RULE_TYPE>After Task Update</RULE_TYPE>
   <ID_FIELD>WP_TASK_ID</ID_FIELD>
   <TEMPLATE_SQL>select t.wp_task_id as &quot;Task ID&quot;,
       t.task_name as &quot;Task Name&quot;,
       t.order_number &quot;Order Number&quot;,
       w.name &quot;Workplan Name&quot;,
       t.wp_task_id as &quot;Task Id&quot;
from wp_tasks t,
     wp_workplan w
where t.wp_workplan_id = w.wp_workplan_id
      and w.workplan_type = 0</TEMPLATE_SQL>
   <TYPE_LABELS>
    <T_LABEL>
     <APP_LANG_ID>0</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>Task Updated (After)</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>1</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>Task Updated (After)</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>5</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>Task Updated (After)</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>10</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>업데이트 된 작업(후)</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>15</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>HTTP Appel</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>20</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>Tâche mise à jour (après)</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>25</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>Tarea Actualizada (Después)</LABEL_TEXT>
    </T_LABEL>
   </TYPE_LABELS>
   <DESC_LABELS>
    <T_LABEL>
     <APP_LANG_ID>0</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>Executed when any value on a Task is updated.</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>1</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>Executed when any value on a Task is updated.</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>5</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>Executed when any value on a Task is updated.</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>10</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>작업의 값이 업데이트 될 때 실행됩니다.</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>15</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>Exécuter Horaire</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>20</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>Exécuté lorsque toute valeur sur une tâche est mise à jour.</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>25</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>Ejecutado cuando se actualiza cualquier valor en una Tarea.</LABEL_TEXT>
    </T_LABEL>
   </DESC_LABELS>
  </RULE_TYPE>
  <SQL_TEXT>declare
    v_xitor_id number;
    v_300_af date;
    v_500_af date;
    v_wp_id number;
begin

    select xitor_id,
           wp_workplan_id
      into v_xitor_id,
           v_wp_id
      from wp_tasks
     where wp_task_id = :wp_task_id;
    
    select finish_actual_date
      into v_300_af
      from wp_tasks
     where wp_workplan_id = v_wp_id
       and order_number = 300;

    select finish_actual_date
      into v_500_af
      from wp_tasks
     where wp_workplan_id = v_wp_id
       and order_number = 500;

    if v_300_af is null 
    or v_500_af is not null
    or util.getvalnumbyid(v_xitor_id, id.permits.cf.prm_permit_status) in (id.vt.v_prm_permit_status.cancelled, 10025442 /*Rejected*/) 
    then
        util.setvalnumbyid(v_xitor_id, 1000067268 /*id.permits.cf.prm_permit_age*/, 0);
    else
        util.setvalnumbyid(v_xitor_id, 1000067268 /*id.permits.cf.prm_permit_age*/, round(current_date - v_300_af));
    end if;
    
end;</SQL_TEXT>
  <WARNING_LABEL/>
  <RULE_CLASS_PARAM_VALS/>
  <RULE_HTTPCALLS/>
  <RULE_HTTPCALL_PARAMS/>
  <BPD_ITEMS>
   <T_BPD_ITEM>
    <ITEM_ID>10000617576</ITEM_ID>
    <PKEY>100007969</PKEY>
    <ITEM_TYPE_ID>9</ITEM_TYPE_ID>
    <ITEM_STATUS_ID>1</ITEM_STATUS_ID>
    <BLOB_DATA/>
    <PROGRAM_ID>1</PROGRAM_ID>
    <NAME>PRM_PERMIT_AGE wtu</NAME>
    <APP_LABEL/>
   </T_BPD_ITEM>
  </BPD_ITEMS>
  <RULE_GEOCODING/>
  <RULE_MAP_SNIPPETS/>
  <PROGRAM_ID>1</PROGRAM_ID>
  <RULE_TYPE_ID>1</RULE_TYPE_ID>
  <RULE_TOWER_GROUPS/>
  <COMPONENT_PACKAGES>
   <T_BPL_COMP_PKG>
    <COMPONENT_ID>4</COMPONENT_ID>
    <OBJECT_ID>100007969</OBJECT_ID>
    <COMPONENTS_PACKAGE_ID>101283</COMPONENTS_PACKAGE_ID>
    <NAME>VP - Permit Management</NAME>
    <PROGRAM_ID>1</PROGRAM_ID>
    <BPD_ITEMS/>
    <IS_LOCKED>0</IS_LOCKED>
   </T_BPL_COMP_PKG>
  </COMPONENT_PACKAGES>
  <CONFIG_FIELD_IDNUMS/>
  <TASK_DATE_IDNUMS/>
  <TASK_IDNUMS>
   <T_TASK_DATE_IDNUM>
    <XITOR_TYPE>Permits</XITOR_TYPE>
    <WP_TEMPLATE>Permit Workplan</WP_TEMPLATE>
    <TASK_LABEL>
     <T_LABEL>
      <APP_LANG_ID>0</APP_LANG_ID>
      <LABEL_TEXT>Application Submitted</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>1</APP_LANG_ID>
      <LABEL_TEXT>Application Submitted</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>5</APP_LANG_ID>
      <LABEL_TEXT>Application Submitted</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>10</APP_LANG_ID>
      <LABEL_TEXT>신청서 제출</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>15</APP_LANG_ID>
      <LABEL_TEXT>Demande soumise </LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>20</APP_LANG_ID>
      <LABEL_TEXT>Application déposée</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>25</APP_LANG_ID>
      <LABEL_TEXT>Solicitud Presentada</LABEL_TEXT>
     </T_LABEL>
    </TASK_LABEL>
   </T_TASK_DATE_IDNUM>
   <T_TASK_DATE_IDNUM>
    <XITOR_TYPE>Permits</XITOR_TYPE>
    <WP_TEMPLATE>Permit Workplan</WP_TEMPLATE>
    <TASK_LABEL>
     <T_LABEL>
      <APP_LANG_ID>0</APP_LANG_ID>
      <LABEL_TEXT>Permit Approved</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>1</APP_LANG_ID>
      <LABEL_TEXT>Permit Approved</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>5</APP_LANG_ID>
      <LABEL_TEXT>Permit Approved</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>10</APP_LANG_ID>
      <LABEL_TEXT>승인 승인</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>15</APP_LANG_ID>
      <LABEL_TEXT>Permis approuvé </LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>20</APP_LANG_ID>
      <LABEL_TEXT>Permis approuvé</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>25</APP_LANG_ID>
      <LABEL_TEXT>Aprobado Permiso</LABEL_TEXT>
     </T_LABEL>
    </TASK_LABEL>
   </T_TASK_DATE_IDNUM>
  </TASK_IDNUMS>
  <TRACKOR_TYPE_IDNUMS/>
  <RELATION_TYPE_IDNUMS/>
  <WP_TEMPLATE_IDNUMS/>
  <WF_TEMPLATE_IDNUMS/>
  <IMPORT_IDNUMS/>
  <REPORT_IDNUMS/>
  <COMPONENT_LABELS/>
 </RULES_ITEM>
 
 <RULES_ITEM>
  <IS_ASYNC>0</IS_ASYNC>
  <IS_ENABLED>1</IS_ENABLED>
  <RULE>PRM_PERMIT_CYCLE_TIME</RULE>
  <RULE_CLASS_ID>1</RULE_CLASS_ID>
  <RULE_ID>100007968</RULE_ID>
  <RULE_TYPE>
   <RULE_TYPE_ID>1</RULE_TYPE_ID>
   <RULE_TYPE>After Task Update</RULE_TYPE>
   <ID_FIELD>WP_TASK_ID</ID_FIELD>
   <TEMPLATE_SQL>select t.wp_task_id as &quot;Task ID&quot;,
       t.task_name as &quot;Task Name&quot;,
       t.order_number &quot;Order Number&quot;,
       w.name &quot;Workplan Name&quot;,
       t.wp_task_id as &quot;Task Id&quot;
from wp_tasks t,
     wp_workplan w
where t.wp_workplan_id = w.wp_workplan_id
      and w.workplan_type = 0</TEMPLATE_SQL>
   <TYPE_LABELS>
    <T_LABEL>
     <APP_LANG_ID>0</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>Task Updated (After)</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>1</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>Task Updated (After)</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>5</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>Task Updated (After)</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>10</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>업데이트 된 작업(후)</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>15</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>HTTP Appel</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>20</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>Tâche mise à jour (après)</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>25</APP_LANG_ID>
     <APP_LABEL_ID>6413</APP_LABEL_ID>
     <LABEL_TEXT>Tarea Actualizada (Después)</LABEL_TEXT>
    </T_LABEL>
   </TYPE_LABELS>
   <DESC_LABELS>
    <T_LABEL>
     <APP_LANG_ID>0</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>Executed when any value on a Task is updated.</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>1</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>Executed when any value on a Task is updated.</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>5</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>Executed when any value on a Task is updated.</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>10</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>작업의 값이 업데이트 될 때 실행됩니다.</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>15</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>Exécuter Horaire</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>20</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>Exécuté lorsque toute valeur sur une tâche est mise à jour.</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>25</APP_LANG_ID>
     <APP_LABEL_ID>6442</APP_LABEL_ID>
     <LABEL_TEXT>Ejecutado cuando se actualiza cualquier valor en una Tarea.</LABEL_TEXT>
    </T_LABEL>
   </DESC_LABELS>
  </RULE_TYPE>
  <SQL_TEXT>declare
    v_xitor_id number;
    v_300_af date;
    v_500_pf date;
    v_wp_id number;
begin

    select xitor_id,
           wp_workplan_id
      into v_xitor_id,
           v_wp_id
      from wp_tasks
     where wp_task_id = :wp_task_id;
    
    select finish_actual_date
      into v_300_af
      from wp_tasks
     where wp_workplan_id = v_wp_id
       and order_number = 300;
    
    if v_300_af is null then
        util.setvalnumbyid(v_xitor_id, 1000067270 /*id.permits.cf.prm_permit_cycle_time*/, 0);
        return;
    end if;
    
    select finish_projected_date
      into v_500_pf
      from wp_tasks
     where wp_workplan_id = v_wp_id
       and order_number = 500;

    util.setvalnumbyid(v_xitor_id, 1000067270 /*id.permits.cf.prm_permit_cycle_time*/, round(v_500_pf - v_300_af));
    
end;</SQL_TEXT>
  <WARNING_LABEL/>
  <RULE_CLASS_PARAM_VALS/>
  <RULE_HTTPCALLS/>
  <RULE_HTTPCALL_PARAMS/>
  <BPD_ITEMS>
   <T_BPD_ITEM>
    <ITEM_ID>10000617575</ITEM_ID>
    <PKEY>100007968</PKEY>
    <ITEM_TYPE_ID>9</ITEM_TYPE_ID>
    <ITEM_STATUS_ID>1</ITEM_STATUS_ID>
    <BLOB_DATA/>
    <PROGRAM_ID>1</PROGRAM_ID>
    <NAME>PRM_PERMIT_CYCLE_TIME</NAME>
    <APP_LABEL/>
   </T_BPD_ITEM>
  </BPD_ITEMS>
  <RULE_GEOCODING/>
  <RULE_MAP_SNIPPETS/>
  <PROGRAM_ID>1</PROGRAM_ID>
  <RULE_TYPE_ID>1</RULE_TYPE_ID>
  <RULE_TOWER_GROUPS/>
  <COMPONENT_PACKAGES>
   <T_BPL_COMP_PKG>
    <COMPONENT_ID>4</COMPONENT_ID>
    <OBJECT_ID>100007968</OBJECT_ID>
    <COMPONENTS_PACKAGE_ID>101283</COMPONENTS_PACKAGE_ID>
    <NAME>VP - Permit Management</NAME>
    <PROGRAM_ID>1</PROGRAM_ID>
    <BPD_ITEMS/>
    <IS_LOCKED>0</IS_LOCKED>
   </T_BPL_COMP_PKG>
  </COMPONENT_PACKAGES>
  <CONFIG_FIELD_IDNUMS/>
  <TASK_DATE_IDNUMS/>
  <TASK_IDNUMS>
   <T_TASK_DATE_IDNUM>
    <XITOR_TYPE>Permits</XITOR_TYPE>
    <WP_TEMPLATE>Permit Workplan</WP_TEMPLATE>
    <TASK_LABEL>
     <T_LABEL>
      <APP_LANG_ID>0</APP_LANG_ID>
      <LABEL_TEXT>Application Submitted</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>1</APP_LANG_ID>
      <LABEL_TEXT>Application Submitted</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>5</APP_LANG_ID>
      <LABEL_TEXT>Application Submitted</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>10</APP_LANG_ID>
      <LABEL_TEXT>신청서 제출</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>15</APP_LANG_ID>
      <LABEL_TEXT>Demande soumise </LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>20</APP_LANG_ID>
      <LABEL_TEXT>Application déposée</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>25</APP_LANG_ID>
      <LABEL_TEXT>Solicitud Presentada</LABEL_TEXT>
     </T_LABEL>
    </TASK_LABEL>
   </T_TASK_DATE_IDNUM>
   <T_TASK_DATE_IDNUM>
    <XITOR_TYPE>Permits</XITOR_TYPE>
    <WP_TEMPLATE>Permit Workplan</WP_TEMPLATE>
    <TASK_LABEL>
     <T_LABEL>
      <APP_LANG_ID>0</APP_LANG_ID>
      <LABEL_TEXT>Permit Approved</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>1</APP_LANG_ID>
      <LABEL_TEXT>Permit Approved</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>5</APP_LANG_ID>
      <LABEL_TEXT>Permit Approved</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>10</APP_LANG_ID>
      <LABEL_TEXT>승인 승인</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>15</APP_LANG_ID>
      <LABEL_TEXT>Permis approuvé </LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>20</APP_LANG_ID>
      <LABEL_TEXT>Permis approuvé</LABEL_TEXT>
     </T_LABEL>
     <T_LABEL>
      <APP_LANG_ID>25</APP_LANG_ID>
      <LABEL_TEXT>Aprobado Permiso</LABEL_TEXT>
     </T_LABEL>
    </TASK_LABEL>
   </T_TASK_DATE_IDNUM>
  </TASK_IDNUMS>
  <TRACKOR_TYPE_IDNUMS/>
  <RELATION_TYPE_IDNUMS/>
  <WP_TEMPLATE_IDNUMS/>
  <WF_TEMPLATE_IDNUMS/>
  <IMPORT_IDNUMS/>
  <REPORT_IDNUMS/>
  <COMPONENT_LABELS/>
 </RULES_ITEM>
</RULES>
</COMPONENTS>